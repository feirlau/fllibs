(function(){"use strict";if("undefined"==typeof JSA.JSAAnimation){JSA.textureHandler=function(t){var e=t.texture;return e||(e=t.texture={frameData:{res:t.pack.path,x:t.offset[0],y:t.offset[1]},textureData:{x:t.textureOffset[0],y:t.textureOffset[1],w:t.textureOffset[2],h:t.textureOffset[3]}}),e},JSA.JSAAnimation=function(t){var e,n,i,a=[],r={},o={},m=new egret.MovieClipData;if(this.timeInfo=new JSA.FPS.TimeInfo(0,0,0),t&&t.items){for(e=0;e<t.items.length;e+=1)n=t.items[e],n.data&&n.type==JSA.JSAType.FILE&&JSA.isTexture(n.data.type)&&(i=n.data.loadImage(),a.push(i.frameData),o[n.path]=i.textureData);t.info&&t.info.fps&&(this.timeInfo.interval=1e3/t.info.fps),m.spriteSheet=t.jsa.zip,m.textureData=o,r.frames=a,m.mcData=r}egret.MovieClip.call(this,m)},JSA.JSAAnimation.prototype=Object.create(egret.MovieClip.prototype),JSA.JSAAnimation.prototype.constructor=JSA.JSAAnimation,JSA.JSAAnimation.prototype.advanceTime=function(t){var e=this;e.timeInfo.time=t;var n=1;if(e.timeInfo.interval&&e.timeInfo.preTime&&(n=e.timeInfo.getIntervalCount()),0==n)return!1;for(;n>=1;){if(n--,e.$nextFrameNum++,e.$nextFrameNum>e.$totalFrames||e.$frameLabelStart>0&&e.$nextFrameNum>e.$frameLabelEnd)if(-1==e.playTimes)e.$eventPool.push(egret.Event.LOOP_COMPLETE),e.$nextFrameNum=1;else{if(e.playTimes--,!(e.playTimes>0)){e.$nextFrameNum=e.$totalFrames,e.$eventPool.push(egret.Event.COMPLETE),e.stop();break}e.$eventPool.push(egret.Event.LOOP_COMPLETE),e.$nextFrameNum=1}e.$currentFrameNum==e.$frameLabelEnd&&(e.$nextFrameNum=e.$frameLabelStart),e.advanceFrame()}return e.constructFrame(),e.handlePendingEvent(),e.timeInfo.preTime=e.timeInfo.time,!1},JSA.JSAContainer=function(){egret.DisplayObjectContainer.call(this),this.animations=[]},JSA.JSAContainer.prototype=Object.create(egret.DisplayObjectContainer.prototype),JSA.JSAContainer.prototype.constructor=JSA.JSAContainer,JSA.JSAContainer.prototype.addAnimation=function(t,e){var n=this.animations.indexOf(t);return 0>n&&(e&&this.animations.length>0?t.gotoAndPlay(this.animations[0].currentFrame,-1):t.gotoAndPlay(0,-1),this.addChild(t),this.animations.push(t)),t},JSA.JSAContainer.prototype.removeAnimation=function(t,e){var n=this.animations.indexOf(t);return n>=0&&(t.stop(),e||this.removeChild(t),this.animations.splice(n,1)),t},JSA.JSAContainer.prototype.removeAnimations=function(t){var e=this.animations,n=e.length-1;for(n;n>=0;n-=1)this.removeAnimation(e[n],t)},JSA.JSAContainer.prototype.removeChildren=function(){this.removeAnimations(!0),egret.DisplayObjectContainer.prototype.removeChildren.call(this)}}}).call(this);