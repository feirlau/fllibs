(function(){"use strict";if("undefined"==typeof JSA.FPS){var e=this,n=function(){};n.HandlerInfo=function(e,t){this.handler=e,this.preframe=0,this.timeInfo=new n.TimeInfo(0,0,t)},n.TimeInfo=function(e,n,t){this.frame=e,this.time=n,this.preTime=0,this.interval=t?t:1},n.TimeInfo.prototype.getIntervalCount=function(e){return e||(e=this.interval),(this.time-this.preTime)/e|0},n.TimeInfo.prototype.sync=function(e){e&&(this.frame=e.frame,this.time=e.time,this.preTime=e.preTime,this.interval=e.interval)},n.prefps=30,n.fps=30,n.requestId=0,n.timeInfo=new n.TimeInfo(0,0,1e3/30),n.on=function(e){e&&(n.fps=e)},n.off=function(){},n.frameHandler=function(e){var t,r;if(n.fps!=n.prefps&&(n.prefps=n.fps,n.timeInfo.interval=1e3/n.fps),n.timeInfo.time=e,!(0!=n.timeInfo.frame&&n.timeInfo.getIntervalCount()<1)){for(t=0;t<n.handlers.length;t+=1)r=n.handlers[t],r.timeInfo.time=e,(0==r.preframe||n.timeInfo.frame-r.preframe>=r.timeInfo.interval)&&(r.handler.call(r,r.timeInfo),r.timeInfo.frame+=1,r.timeInfo.preTime=e,r.preframe=n.timeInfo.frame);return n.timeInfo.preTime=e,n.timeInfo.frame+=1,!0}},n.add=function(e,t){var r=n.get(e);return null==r?(r=new n.HandlerInfo(e,t),n.handlers.push(r)):t&&(r.timeInfo.interval=t),r},n.remove=function(e){var t,r=n.get(e);return r&&(t=n.handlers.indexOf(r),n.handlers.splice(t,1)),r},n.handlers=[],n.get=function(e){var t,r;for(t=n.handlers.length-1;t>=0;t-=1)if(r=handlers[t],r&&r.handler==e)return r;return null},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=JSA.FPS),exports.JSA.FPS=n):e.JSA.FPS=n}}).call(this);